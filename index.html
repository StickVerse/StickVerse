<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StickVerse - Old Roblox Style</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #ccc;
            font-family: 'Source Sans Pro', Arial, sans-serif;
            image-rendering: pixelated;
            overflow: hidden;
        }
        
        /* Classic Roblox Doodle Font Effect */
        .doodle-text {
            font-weight: bold;
            color: white;
            text-shadow: 
                -2px -2px 0 #000,
                2px -2px 0 #000,
                -2px 2px 0 #000,
                2px 2px 0 #000,
                0 0 10px #000;
            letter-spacing: 1px;
        }
        
        header {
            background: #02b875;
            height: 36px;
            border-bottom: 3px solid #000;
            display: flex;
            align-items: center;
            padding: 0 10px;
            box-shadow: 0 4px 0 #028048;
            position: relative;
            z-index: 100;
        }
        
        .logo {
            background: #fff;
            color: #02b875;
            padding: 4px 12px;
            font-size: 20px;
            font-weight: bold;
            border: 3px solid #000;
            margin-right: 20px;
            box-shadow: 3px 3px 0 #000;
        }
        
        .topbar-btn {
            background: #ff5454;
            color: white;
            border: 3px solid #000;
            padding: 6px 16px;
            margin-left: 10px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 3px 3px 0 #000;
        }
        
        .topbar-btn:hover {
            background: #ff4040;
        }
        
        .topbar-btn:active {
            box-shadow: inset 3px 3px 0 #000;
            transform: translate(1px, 1px);
        }
        
        .currency {
            background: yellow;
            color: black;
            border: 3px solid #000;
            padding: 4px 12px;
            margin-left: auto;
            margin-right: 10px;
            font-weight: bold;
            box-shadow: 3px 3px 0 #000;
        }
        
        nav {
            background: #1e1e1e;
            height: 40px;
            border-bottom: 4px solid #000;
            display: flex;
            align-items: center;
            padding-left: 10px;
            gap: 4px;
        }
        
        .nav-btn {
            background: #888;
            color: white;
            border: 3px solid #000;
            padding: 8px 20px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 3px 3px 0 #000;
        }
        
        .nav-btn.active {
            background: #02b875;
            box-shadow: inset 3px 3px 0 #028048;
        }
        
        .container {
            display: flex;
            height: calc(100vh - 80px);
        }
        
        .sidebar {
            width: 200px;
            background: #aaa;
            border-right: 4px solid #000;
            padding: 10px;
        }
        
        .sidebar h3 {
            background: #666;
            color: white;
            padding: 8px;
            border: 3px solid #000;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .friend {
            background: white;
            border: 3px solid #000;
            padding: 8px;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .friend-avatar {
            width: 30px;
            height: 30px;
            background: #02b875;
            border: 2px solid #000;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .main {
            flex: 1;
            padding: 20px;
            background: #ddd;
            overflow-y: auto;
        }
        
        .panel {
            background: white;
            border: 4px solid #000;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .avatar-viewer {
            width: 300px;
            height: 400px;
            background: #02b875;
            border: 6px solid #000;
            position: relative;
            float: left;
            margin-right: 20px;
        }
        
        .stickman-avatar {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .stickman-head { width: 60px; height: 60px; background: white; position: absolute; top: 40px; left: 120px; border: 4px solid #000; }
        .stickman-body { width: 12px; height: 140px; background: white; position: absolute; top: 100px; left: 144px; border-left: 4px solid #000; border-right: 4px solid #000; }
        .stickman-arm-left { width: 80px; height: 12px; background: white; position: absolute; top: 120px; left: 80px; transform: rotate(30deg); border: 4px solid #000; }
        .stickman-arm-right { width: 80px; height: 12px; background: white; position: absolute; top: 120px; left: 140px; transform: rotate(-30deg); border: 4px solid #000; }
        .stickman-leg-left { width: 80px; height: 12px; background: white; position: absolute; top: 240px; left: 100px; transform: rotate(-40deg); border: 4px solid #000; }
        .stickman-leg-right { width: 80px; height: 12px; background: white; position: absolute; top: 240px; left: 140px; transform: rotate(40deg); border: 4px solid #000; }
        
        /* Accessory Layers - Exact Size Match */
        .acc-hat, .acc-face, .acc-glasses { width: 60px; height: 60px; position: absolute; top: 40px; left: 120px; image-rendering: pixelated; }
        .acc-shirt { width: 100px; height: 100px; position: absolute; top: 90px; left: 100px; image-rendering: pixelated; }
        .acc-pants { width: 90px; height: 120px; position: absolute; top: 200px; left: 105px; image-rendering: pixelated; }
        
        .creator-tool {
            background: #e0e0e0;
            border: 4px solid #000;
            padding: 15px;
            clear: both;
        }
        
        .tool-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .tool-btn {
            background: #888;
            color: white;
            border: 3px solid #000;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .tool-btn.active {
            background: #02b875;
        }
        
        .color-palette {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 6px;
            margin: 15px 0;
        }
        
        .color {
            width: 40px;
            height: 40px;
            border: 4px solid #000;
            cursor: pointer;
            box-shadow: 3px 3px 0 #000;
        }
        
        .color.selected {
            border: 6px solid yellow;
        }
        
        .canvas-area {
            display: flex;
            gap: 30px;
            margin-top: 20px;
            align-items: flex-start;
        }
        
        .creator-canvas, .preview-area {
            border: 6px solid #000;
            background: #aaa;
            position: relative;
        }
        
        /* GRID SIZES NOW MATCH EXACT ACCESSORY DIMENSIONS */
        #canvas-hat, #canvas-face, #canvas-glasses { width: 300px; height: 300px; }
        #canvas-shirt { width: 400px; height: 400px; }
        #canvas-pants { width: 380px; height: 480px; }
        
        .grid-pixel {
            position: absolute;
            background: transparent;
            border: 1px solid rgba(0,0,0,0.1);
            cursor: crosshair;
        }
        
        .preview-stickman {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .btn-big {
            background: #ff5454;
            color: white;
            border: 4px solid #000;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 5px 5px 0 #000;
            margin-top: 20px;
            display: inline-block;
        }
        
        .btn-big:hover {
            background: #ff4040;
        }
    </style>
</head>
<body>

<header>
    <div class="logo doodle-text">STICKVERSE</div>
    <div class="currency doodle-text">PENCILS: <span id="pencils">1000</span></div>
    <button class="topbar-btn" id="login-btn">LOG IN</button>
    <button class="topbar-btn" id="signup-btn">SIGN UP</button>
    <button class="topbar-btn" id="logout-btn" style="display:none">LOG OUT</button>
</header>

<nav>
    <button class="nav-btn active" data-tab="home">Home</button>
    <button class="nav-btn" data-tab="avatar">Avatar</button>
    <button class="nav-btn" data-tab="profile">Profile</button>
</nav>

<div class="container">
    <div class="sidebar">
        <h3 class="doodle-text">FRIENDS</h3>
        <div id="friends-list">No friends yet :(</div>
    </div>
    
    <div class="main">
        <div id="home" class="tab">
            <div class="panel">
                <h1 class="doodle-text" style="font-size:48px;text-align:center;">WELCOME TO STICKVERSE</h1>
                <p style="text-align:center;margin:20px;font-size:20px;">The #1 place to make stickman games and accessories!</p>
                <div style="text-align:center;">
                    <div style="display:inline-block;background:#ff5454;color:white;padding:20px;border:6px solid #000;font-size:24px;font-weight:bold;">
                        ACCESSORY CREATOR EVENT - WIN 1000 PENCILS!
                    </div>
                </div>
            </div>
        </div>
        
        <div id="avatar" class="tab" style="display:none">
            <h2 class="doodle-text" style="font-size:36px;margin-bottom:20px;">AVATAR EDITOR</h2>
            
            <div class="avatar-viewer">
                <div class="stickman-avatar">
                    <div class="stickman-head"></div>
                    <div class="stickman-body"></div>
                    <div class="stickman-arm-left"></div>
                    <div class="stickman-arm-right"></div>
                    <div class="stickman-leg-left"></div>
                    <div class="stickman-leg-right"></div>
                    
                    <div class="acc-hat" id="worn-hat"></div>
                    <div class="acc-face" id="worn-face"></div>
                    <div class="acc-shirt" id="worn-shirt"></div>
                    <div class="acc-pants" id="worn-pants"></div>
                    <div class="acc-glasses" id="worn-glasses"></div>
                </div>
            </div>
            
            <div class="creator-tool">
                <h3 class="doodle-text">CREATE ACCESSORY (50 PENCILS)</h3>
                
                <div class="tool-buttons">
                    <button class="tool-btn active" data-tool="draw">DRAW</button>
                    <button class="tool-btn" data-tool="erase">ERASE</button>
                    <button class="tool-btn" data-tool="fill">FILL</button>
                    <button class="tool-btn" id="clear">CLEAR</button>
                </div>
                
                <div class="color-palette">
                    <div class="color selected" style="background:#ff0000" data-color="#ff0000"></div>
                    <div class="color" style="background:#00ff00" data-color="#00ff00"></div>
                    <div class="color" style="background:#0000ff" data-color="#0000ff"></div>
                    <div class="color" style="background:#ffff00" data-color="#ffff00"></div>
                    <div class="color" style="background:#ff00ff" data-color="#ff00ff"></div>
                    <div class="color" style="background:#00ffff" data-color="#00ffff"></div>
                    <div class="color" style="background:#ffffff" data-color="#ffffff"></div>
                    <div class="color" style="background:#000000" data-color="#000000"></div>
                    <div class="color" style="background:#ff6b35" data-color="#ff6b35"></div>
                    <div class="color" style="background:#02b875" data-color="#02b875"></div>
                </div>
                
                <select id="acc-type" style="padding:10px;font-size:18px;border:4px solid #000;margin-bottom:15px;">
                    <option value="hat">Hat (60x60)</option>
                    <option value="face">Face (60x60)</option>
                    <option value="shirt">Shirt (100x100)</option>
                    <option value="pants">Pants (90x120)</option>
                    <option value="glasses">Glasses (60x60)</option>
                </select>
                
                <input type="text" id="acc-name" placeholder="Accessory Name" style="width:100%;padding:12px;font-size:18px;border:4px solid #000;margin-bottom:15px;">
                
                <div class="canvas-area">
                    <div>
                        <h4 class="doodle-text">DRAW HERE</h4>
                        <div id="creator-canvas" class="creator-canvas"></div>
                    </div>
                    <div>
                        <h4 class="doodle-text">LIVE PREVIEW</h4>
                        <div class="preview-area" style="width:300px;height:400px;background:#02b875;border:6px solid #000;position:relative;">
                            <div class="preview-stickman">
                                <div class="stickman-head"></div>
                                <div class="stickman-body"></div>
                                <div class="stickman-arm-left"></div>
                                <div class="stickman-arm-right"></div>
                                <div class="stickman-leg-left"></div>
                                <div class="stickman-leg-right"></div>
                                <div id="preview-acc"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="text-align:center;">
                    <button class="btn-big" id="create-acc">CREATE ACCESSORY</button>
                </div>
            </div>
        </div>
        
        <div id="profile" class="tab" style="display:none">
            <h2 class="doodle-text" style="font-size:40px;">PROFILE</h2>
            <div class="panel" style="text-align:center;">
                <h3 id="username" class="doodle-text" style="font-size:36px;">Not Logged In</h3>
                <p>Pencils: <span id="profile-pencils">0</span></p>
                <p>Friends: <span id="profile-friends">0</span></p>
            </div>
        </div>
    </div>
</div>

<script>
    // Super simple old Roblox feel - no fancy stuff
    let currentUser = localStorage.getItem('sv_user') || null;
    let userData = currentUser ? JSON.parse(localStorage.getItem('sv_' + currentUser)) || {pencils:1000, items:[], equipped:{}} : {pencils:1000, items:[], equipped:{}};
    let currentColor = "#ff0000";
    let currentTool = "draw";
    let pixels = [];
    
    const sizes = {
        hat: {w:60, h:60, canvas:300},
        face: {w:60, h:60, canvas:300},
        glasses: {w:60, h:60, canvas:300},
        shirt: {w:100, h:100, canvas:400},
        pants: {w:90, h:120, canvas:380}
    };
    
    function init() {
        updateLoginState();
        setupCanvas();
        document.querySelectorAll('.nav-btn').forEach(b => b.onclick = () => switchTab(b.dataset.tab));
        document.querySelectorAll('.color').forEach(c => c.onclick = () => {
            document.querySelectorAll('.color').forEach(x => x.classList.remove('selected'));
            c.classList.add('selected');
            currentColor = c.dataset.color;
        });
        document.querySelectorAll('.tool-btn').forEach(b => b.onclick = () => {
            document.querySelectorAll('.tool-btn').forEach(x => x.classList.remove('active'));
            b.classList.add('active');
            currentTool = b.dataset.tool || b.id;
        });
        document.getElementById('acc-type').onchange = setupCanvas;
        document.getElementById('create-acc').onclick = createAccessory;
        document.getElementById('login-btn').onclick = () => promptLogin();
        document.getElementById('signup-btn').onclick = () => promptLogin(true);
        document.getElementById('logout-btn').onclick = () => { currentUser = null; localStorage.removeItem('sv_user'); location.reload(); };
    }
    
    function switchTab(tab) {
        document.querySelectorAll('.tab').forEach(t => t.style.display = 'none');
        document.getElementById(tab).style.display = 'block';
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.querySelector(`.nav-btn[data-tab="${tab}"]`).classList.add('active');
    }
    
    function setupCanvas() {
        const type = document.getElementById('acc-type').value;
        const canvas = document.getElementById('creator-canvas');
        canvas.innerHTML = '';
        canvas.style.width = sizes[type].canvas + 'px';
        canvas.style.height = (type === 'pants' ? 480 : sizes[type].canvas) + 'px';
        
        const pixelSize = sizes[type].canvas / sizes[type].w;
        pixels = [];
        
        for (let y = 0; y < sizes[type].h; y++) {
            for (let x = 0; x < sizes[type].w; x++) {
                const p = document.createElement('div');
                p.className = 'grid-pixel';
                p.style.width = p.style.height = pixelSize + 'px';
                p.style.left = x * pixelSize + 'px';
                p.style.top = y * pixelSize + 'px';
                p.dataset.x = x; p.dataset.y = y;
                p.onmousedown = p.onmouseover = function(e) {
                    if (e.buttons === 1) {
                        if (currentTool === 'erase') p.style.background = 'transparent';
                        else p.style.background = currentColor;
                        updatePreview();
                    }
                };
                canvas.appendChild(p);
                pixels.push(p);
            }
        }
        updatePreview();
    }
    
    function updatePreview() {
        const type = document.getElementById('acc-type').value;
        const preview = document.getElementById('preview-acc');
        preview.innerHTML = '';
        preview.className = 'acc-' + type;
        
        const scale = sizes[type].w / sizes[type].canvas * 300;
        pixels.forEach(p => {
            if (p.style.background && p.style.background !== 'transparent') {
                const px = document.createElement('div');
                px.style.position = 'absolute';
                px.style.background = p.style.background;
                px.style.left = parseInt(p.style.left) * scale / sizes[type].canvas * 300 + 'px';
                px.style.top = parseInt(p.style.top) * scale / sizes[type].canvas * 300 + 'px';
                px.style.width = px.style.height = scale + 'px';
                preview.appendChild(px);
            }
        });
    }
    
    function createAccessory() {
        if (!currentUser) return alert("Log in first!");
        if (userData.pencils < 50) return alert("Not enough pencils!");
        
        const name = document.getElementById('acc-name').value || "Cool Accessory";
        const type = document.getElementById('acc-type').value;
        const data = pixels.map(p => p.style.background || 'transparent');
        
        const acc = {id: Date.now(), name, type, data, size: sizes[type]};
        userData.items.push(acc);
        userData.pencils -= 50;
        if (userData.items.length === 1) userData.pencils += 1000;
        
        localStorage.setItem('sv_' + currentUser, JSON.stringify(userData));
        alert("Created " + name + "!");
        equipAccessory(acc);
    }
    
    function equipAccessory(acc) {
        userData.equipped[acc.type] = acc;
        document.getElementById('worn-' + acc.type).innerHTML = '';
        const scale = sizes[acc.type].w / 60;
        acc.data.forEach((color, i) => {
            if (color !== 'transparent') {
                const x = i % sizes[acc.type].w;
                const y = Math.floor(i / sizes[acc.type].w);
                const px = document.createElement('div');
                px.style.position = 'absolute';
                px.style.background = color;
                px.style.left = x * scale + 'px';
                px.style.top = y * scale + 'px';
                px.style.width = px.style.height = scale + 'px';
                document.getElementById('worn-' + acc.type).appendChild(px);
            }
        });
    }
    
    function promptLogin(isSignup = false) {
        const name = prompt(isSignup ? "Choose username:" : "Enter username:");
        if (name) {
            currentUser = name;
            localStorage.setItem('sv_user', name);
            if (!localStorage.getItem('sv_' + name)) {
                userData = {pencils:1000, items:[], equipped:{}};
                localStorage.setItem('sv_' + name, JSON.stringify(userData));
            } else {
                userData = JSON.parse(localStorage.getItem('sv_' + name));
            }
            updateLoginState();
        }
    }
    
    function updateLoginState() {
        if (currentUser) {
            document.getElementById('login-btn').style.display = 'none';
            document.getElementById('signup-btn').style.display = 'none';
            document.getElementById('logout-btn').style.display = 'block';
            document.getElementById('username').textContent = currentUser;
            document.getElementById('pencils').textContent = userData.pencils;
            document.getElementById('profile-pencils').textContent = userData.pencils;
        }
    }
    
    init();
</script>
</body>
</html>
